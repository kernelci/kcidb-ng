# kcidb-rest interface workers

services:
  kcidb-rest:
    build:
      context: .
      dockerfile: Dockerfile.kcidb-rest-rs
    env_file:
      - .env
    ports:
      - "3000:3000"
    volumes:
      - ./spool:/app/spool
    restart: unless-stopped
# To disable JWT auth
#    command: ["/usr/local/bin/kcidb-restd-rs","-j",""]
  ingester:
    build:
      context: .
      dockerfile: Dockerfile.ingester
    env_file:
      - .env
    volumes:
      - ./spool:/app/spool
    command: ["python", "/app/ingester.py", "--spool-dir", "/app/spool"]
    restart: unless-stopped
  logspec-worker:
    build:
      context: .
      dockerfile: Dockerfile.logspec-worker
    env_file:
      - .env
    volumes:
      - ./spool:/app/spool
    command: ["python", "/app/logspec_worker.py", "--spool-dir", "/app/spool"]
    restart: unless-stopped
